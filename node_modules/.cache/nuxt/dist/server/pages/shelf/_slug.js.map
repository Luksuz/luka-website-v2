{"version":3,"file":"pages/shelf/_slug.js","sources":["webpack:///./pages/shelf/_slug.vue?0d46","webpack:///./utils/seo.js","webpack:///./pages/shelf/_slug.vue","webpack:///./pages/shelf/_slug.vue?e6b1","webpack:///./pages/shelf/_slug.vue?3fb0"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mx-auto px-4 mt-4\"},[_vm._ssrNode(\"<header><h2 class=\\\"text-3xl md:text-5xl leading-tight\\\">\"+_vm._ssrEscape(\"\\n      \"+_vm._s(_vm.article.content.title)+\"\\n    \")+\"</h2> <div class=\\\"flex items-center mt-6\\\"><img\"+(_vm._ssrAttr(\"src\",_vm.author.content.Avatar.filename))+(_vm._ssrAttr(\"alt\",_vm.author.content.name))+\" class=\\\"w-20 rounded-full border-4 border-kjColorSecondary\\\"> <div class=\\\"ml-6\\\"><p class=\\\"text-xl font-bold\\\">\"+_vm._ssrEscape(_vm._s(_vm.author.name))+\"</p> <p class=\\\"text-sm mt-1\\\">\"+_vm._ssrEscape(\"\\n          \"+_vm._s(_vm.article.content.date.toLocaleDateString())+\"\\n        \")+\"</p></div></div></header> \"),_vm._ssrNode(\"<div class=\\\"mt-4 flex flex-wrap\\\">\",\"</div>\",_vm._l((_vm.article.tag_list),function(tag){return _c('nuxt-link',{key:tag,staticClass:\"rounded-full text-kjColorLight bg-kjColorSecondary uppercase text-sm mr-2 mb-2 px-2 py-1\",attrs:{\"to\":(\"/shelf/topics/\" + (_vm.tagSlug(tag)))}},[_vm._v(_vm._s(tag)+\"\\n    \")])}),1),_vm._ssrNode(\" <div class=\\\"prose mt-8\\\">\"+(_vm._s(_vm.$md.render(_vm.article.content.long_text)))+\"</div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const createSEOMeta = data => [\n  { hid: 'og:title', property: 'og:title', content: data.title },\n  { hid: 'description', name: 'description', content: data.intro },\n  {\n    hid: 'og:description',\n    property: 'og:description',\n    content: data.intro\n  },\n  { hid: 'og:image', property: 'og:image', content: data.image },\n  {\n    hid: 'og:url',\n    property: 'og:url',\n    content: process.env.HOST_NAME + '/' + data.url\n  },\n  {\n    hid: 'twitter:card',\n    name: 'twitter:card',\n    content: data.cardType || 'summary_large_image'\n  }\n];\n","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { createSEOMeta } from '@/utils/seo';\nimport kebabCase from 'lodash/kebabCase';\n\nexport default {\n  async asyncData({ app, route, error }) {\n    // Get the slug from the route\n    const slug = route.params.slug;\n\n    const res = await app.$storyapi.get('cdn/stories', {\n      starts_with: 'articles/',\n      by_slugs: '*/' + slug,\n      resolve_relations: 'author'\n    });\n\n    const article = res.data.stories[0];\n    if (!article) return error(`Article with slug ${slug} not found`);\n\n    article.content.date = new Date(article.content.date);\n\n    return { article, author: article.content.author };\n  },\n  methods: {\n    tagSlug(tag) {\n      return kebabCase(tag);\n    }\n  },\n  head() {\n    const url = this.article.slug;\n    const { title, intro, Asset } = this.article.content;\n\n    return {\n      title,\n      meta: createSEOMeta({ title, intro, image: Asset.filename, url })\n    };\n  }\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_slug.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_slug.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_slug.vue?vue&type=template&id=616984f6&\"\nimport script from \"./_slug.vue?vue&type=script&lang=js&\"\nexport * from \"./_slug.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"187d1698\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;;;;;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AAhCA;;ACvCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}